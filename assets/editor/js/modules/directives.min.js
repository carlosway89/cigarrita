"use strict";var cigarritaDirective=angular.module("cigarritaDirective",["ngResource"]);cigarritaDirective.directive("languageSelect",function(b,a){return{link:function(e,d,c,g){var f=c.languageSelect;
$(d).dropdown();e.$watch(f,function(i){if(angular.isObject(i)){var h=$(d).find(".menu.laguage-select");h.empty();angular.forEach(i,function(k,j){h.append('<div class="item" data-value="'+k.min+'"><i class="flag-icon-'+k.flag+' flag-icon"></i> '+k.name+"</div>");
});setTimeout(function(){$(d).dropdown();},100);}});$(d).on("change",function(h){var i=$(d).find("input").val();beans.createCookie("language.initial",i,10);
a.$broadcast("language.changed");});}};}).directive("elementBlock",function(a){return{terminal:true,priority:1002,link:function(d,c,b){var e="block in page | filter:{category:'"+b.elementBlock+"'}";
b.$set("ngRepeat",e);b.$set("elementBlock",null);a(c)(d);}};}).directive("elementPost",function(a){return{terminal:true,priority:1001,link:function(e,d,b){var f="post in block.posts";
b.$set("ngRepeat",f);b.$set("elementPost",null);var c=$(d).attr("class");$('<div class="'+c+' text-center inline-add"><a id="new" href="javascript:;;" class="plus-gray" ><span>+</span><label>Add New</label></a></div>').insertAfter(d);
a(d)(e);}};}).directive("elementObject",function(b,a){return{link:function(f,e,d){var c=[];f.$watch(d.elementObject,function(g){if(angular.isObject(g)){c=g;
}});e.hover(function(){e.append("<div id='inline-editors'><span class='tooling tooling-top editing-inline' data-tool='edit inline'>&#9997;</span><span class='tooling tooling-top editing-external' data-tool='edit details'>&#8599;</span></div>");
setTimeout(function(){e.find(".editing-inline").on("click",function(g){g.stopImmediatePropagation();$("#inline-saver").remove();e.addClass("editable-mode");
e.find("[contenteditable]").attr("contenteditable","true");e.find("[contenteditable]:last-child").focus();e.append("<div id='inline-saver'><span class='inline-saving'>Save</span><span class='inline-closing'>x</span></div>");
b(document.getElementById("inline-saver"))(f);e.element.hover();});e.find(".inline-closing").on("click",function(g){g.stopImmediatePropagation();e.removeClass("editable-mode");
e.find("[contenteditable]").attr("contenteditable","false");$("#inline-saver").remove();});e.find(".inline-saving").on("click",function(h){h.stopImmediatePropagation();
var g=d.elementObject;a.$broadcast("inline.saving."+g,c);$(".inline-saving").addClass("success").html("&#x2713;");$(".inline-closing").remove();setTimeout(function(){e.removeClass("editable-mode");
e.find("[contenteditable]").attr("contenteditable","false");$("#inline-saver").remove();},2000);});},100);},function(){e.find("div#inline-editors").remove();
});}};}).directive("contenteditable",function(){return{require:"ngModel",link:function(c,b,a,d){if(d){b.bind("blur",function(){c.$apply(function(){var e=b.html();
e=e.replace("<div id='inline-saver'><span class='inline-saving'>Save</span><span class='inline-closing'>x</span></div>","");e=e.replace("<div id='inline-editors'><span class='tooling tooling-top editing-inline' data-tool='edit inline'>&#9997;</span><span class='tooling tooling-top editing-external' data-tool='edit details'>&#8599;</span></div>","");
d.$setViewValue(e);});});}}};}).directive("menuLinks",function(b,a){return{link:function(f,e,d){var c=d.menuLinks;if(c=="scroll"){e.attr("target","_self");
$(e).on("click",function(j){j.preventDefault();var m=b.path();var l=$(".header-options").find("[href^='"+m+"']");var k=l.attr("target");$(".header-options a").removeClass("active");
var i=$(e).attr("href");$(e).addClass("active");if(!k){b.path(i).replace();f.$apply();}else{i=i.replace("/","");var h=$("#"+i);$("html, body").stop().animate({scrollTop:h.offset().top-100},1500);
}});}else{if(c=="new_scroll"){var g=b.path();}else{$(e).on("click",function(h){$(".header-options a").removeClass("active");$(e).addClass("active");});
}}}};});